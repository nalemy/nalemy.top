---
title: "[AGC011C] Squared Graph"
categories:
  - 题目
date: 2023-11-16 21:23:03
tags:
  - 图论
---
将原图称作 $G$，新图称作 $P$，显然 $G$ 中当 $a,x$ 不连通或 $b,y$ 不连通时，$P$ 中 $(a,b),(x,y)$ 一定不连通。

否则不难发现 $P$ 中 $(a,b),(x,y)$ 连通仅当 $a,x$ 之间和 $b,y$ 之间存在长度相等的路径。

如果 $G$ 中 $a,x$ 和 $b,y$ 所在的连通块中至少一个存在奇环，则两个连通块中各选一个构成 $P$ 中的点，均连通。

否则两个连通块中各自黑白染色，能够构成 $P$ 中两个连通块，其中一个由所有 $a,b$ 颜色相同的 $(a,b)$ 构成，另外一个反之。

至于孤点需要特殊处理，因为“奇偶性相同一定可以构造出长度相同的路径”需要至少有一条边来反复走，这个结论对孤点不适用。