---
title: "[APIO2018] 铁人两项"
categories:
  - 题目
date: 2023-10-20 08:55:20
tags:
  - 双连通分量
  - 转化
---
图中存在一条起点、中转点、终点之间的点不重路径，当且仅当在该图的广义圆方树上，中转点所在的某一个点双对应的方点在起点和终点对应的圆点之间的路径上。

那么给广义圆方树上所有方点赋权为该点代表的点双连通分量大小，圆点赋权为 $-1$，这样选定起点、终点后，中转点的方案数等于起点、终点在广义圆方树上对应的点之间的路径上所有点的点权和。路径上两个方点之间的原点的 $-1$ 可以减去两个点双中该圆点的重复贡献；路径的起点和终点的两个 $-1$ 可以减去中转点和起点、终点重合的情况。